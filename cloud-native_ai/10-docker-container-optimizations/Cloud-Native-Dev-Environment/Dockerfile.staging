FROM python:3.11-slim 

WORKDIR /app
 
COPY . .

# Install uv + dependencies (re-runs on ANY file change because of COPY above)
RUN pip install --no-cache-dir uv && uv pip install --system --no-cache -r pyproject.toml && pip uninstall -y uv

EXPOSE 8000

CMD ["uvicorn", "main:app", "--reload", "--host", "0.0.0.0", "--port", "8000"]